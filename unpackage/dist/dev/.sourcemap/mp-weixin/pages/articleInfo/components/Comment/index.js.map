{"version":3,"sources":[null,"webpack:///D:/合拍/navigation/pages/articleInfo/components/Comment/index.vue?3a61","webpack:///D:/合拍/navigation/pages/articleInfo/components/Comment/index.vue?bcaf","webpack:///D:/合拍/navigation/pages/articleInfo/components/Comment/index.vue?6eb5","uni-app:///pages/articleInfo/components/Comment/index.vue","webpack:///D:/合拍/navigation/pages/articleInfo/components/Comment/index.vue?bcf6","webpack:///D:/合拍/navigation/pages/articleInfo/components/Comment/index.vue?80aa"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAgoB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6EppB;AACA,uBADA;AAEA,8FAFA;AAGA,qBAHA;AAIA;AACA,gBADA;AAEA,kBAFA,EAJA;;AAQA;AACA;AACA;AACA,iBADA;AAEA,+CAFA;AAGA,oBAHA,EAFA;;AAOA;AACA;AACA,kBADA;AAEA,qCAFA;AAGA,oBAHA,EARA;;AAaA;AACA;AACA,kBADA;AAEA,qCAFA,EAdA;;AAkBA;AACA;AACA,oBADA;AAEA,oBAFA,EAnBA;;AAuBA;AACA;AACA,oBADA;AAEA,oBAFA,EAxBA;;AA4BA;AACA;AACA,oBADA;AAEA,oBAFA,EA7BA;;AAiCA;AACA;AACA,oBADA;AAEA,oBAFA,EAlCA,EARA;;;AA+CA,MA/CA,kBA+CA;AACA;AACA,eADA,EACA;AACA,mBAFA;;AAIA,GApDA;AAqDA;AACA,iBADA,+BACA;AACA;AACA;AACA;AACA,KALA,EArDA;;AA4DA,SA5DA,qBA4DA;AACA;AACA;AACA;AACA;AACA,KAHA;AAIA,GAlEA;AAmEA;AACA;AACA,eAFA,yBAEA;AACA;AACA,KAJA;AAKA;AACA,yBANA,iCAMA,OANA,EAMA;AACA;AACA;AACA,cADA;AAEA,mBAFA;AAGA,kBAHA;AAIA,oBAJA;AAKA,gBALA;AAMA,mBANA;AAOA,sBAPA;AAQA,gBARA;;;AAWA;AACA;AACA;AACA,kEADA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAjCA;AAkCA;AACA,YAnCA,2BAmCA;AACA;AACA;AACA;AACA;AACA;AACA,0BAFA;;AAIA,WANA;AAOA,uDAPA,EADA;;AAUA;AACA;AACA;AACA,WAHA;AAIA,4CAJA,EAVA;;AAgBA;AACA;AACA;AACA,WAHA;AAIA,8CAJA,EAhBA;;AAsBA;AACA;AACA;AACA,2EADA;;AAGA,WALA;AAMA,kDANA,EAtBA;;;;AAgCA;AACA;;AAEA;AACA;AACA;AACA;AACA,KA3EA;AA4EA;AACA,wBA7EA,gCA6EA,OA7EA,EA6EA;AACA;AACA;AACA;AACA;AACA,6BADA,CACA;AACA;;AAEA;AACA,SANA,CADA;;;AAUA;AACA;AACA;;AAEA;AACA,iDAhBA;;AAkBA,0BAlBA,aAkBA;AACA;AACA;AACA;AACA;AACA,WAvBA;;AAyBA;AACA,OA1BA,CA0BA;AACA;AACA;AACA,KA3GA;AA4GA;AACA,WA7GA,mBA6GA,EA7GA,EA6GA;AACA;AACA;AACA,KAhHA;AAiHA;AACA,WAlHA,mBAkHA,EAlHA,EAkHA;AACA;AACA;AACA,KArHA;AAsHA;AACA,cAvHA,sBAuHA,EAvHA,EAuHA;AACA;AACA;AACA,KA1HA;AA2HA;AACA,cA5HA;;;AA+HA,kVAFA,UAEA,EAFA,EAEA,oBAFA,EAEA,EAFA,QAEA,oBAFA,QAEA,EAFA,MAEA,wFADA,MACA,EADA,MACA,6BADA,IACA;AACA,uBADA,GACA,4CADA;;AAGA;AAHA,sBAIA,yCAJA;;AAMA,oBANA,GAMA,oCANA;;AAQA,mBARA,GAQA;AACA;AACA;AACA,iBAXA;;AAaA,wDAbA;;AAeA,2CAfA;;;AAkBA,KAjJA;AAkJA;AACA,qBAnJA,oCAmJA;AACA;AACA;AACA,uBAHA,GAGA,4CAHA;AAIA,uDAJA;;AAMA,yEANA;;AAQA,sCARA;;AAUA,4CAVA;;;AAaA,KAhKA;AAiKA;AACA,uBAlKA,sCAkKA;AACA,yDADA;;AAGA,oBAHA,GAGA,oCAHA;AAIA,mDAJA;;AAMA,yCANA;;AAQA,4CARA;;;AAWA,KA7KA;AA8KA;AACA,cA/KA,sBA+KA,EA/KA,EA+KA;AACA,uBADA,CACA,YADA,kBACA,YADA,CACA,UADA,kBACA,UADA;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA,KAlMA;AAmMA;AACA,cApMA,sBAoMA,EApMA,EAoMA,OApMA,EAoMA;AACA,uBADA,CACA,YADA,mBACA,YADA;;AAGA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BADA;AAEA,kBAFA;AAGA,sDAHA,CADA;;AAMA;;AAEA;AACA;AACA;AACA,KA3NA;AA4NA;AACA,iBA7NA,yBA6NA,EA7NA,EA6NA;AACA,uBADA,CACA,YADA,mBACA,YADA,CACA,UADA,mBACA,UADA;;AAGA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,OAPA;;AASA;AACA;AACA,KA3OA;AA4OA;AACA,iBA7OA,yBA6OA,MA7OA,EA6OA,EA7OA,EA6OA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAzPA;AA0PA;AACA,YA3PA,oBA2PA,EA3PA,EA2PA;AACA,mBADA,2CACA,CADA,iBACA,CADA;AAEA;AACA,KA9PA;AA+PA;AACA,kBAhQA,0BAgQA,GAhQA,EAgQA;AACA;AACA;AACA,OAFA;AAGA,KApQA,EAnEA,E;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAA2tC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACA/uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/articleInfo/components/Comment/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=e8cef2a6&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e8cef2a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8cef2a6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/articleInfo/components/Comment/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=e8cef2a6&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 =\n    _vm.cacheData.length > 0\n      ? _vm.__map(_vm.cacheData, function(comment, i) {\n          var $orig = _vm.__get_orig(comment)\n\n          var m0 = _vm.$hasScopedSlotsParams(\"310e600e-3-\" + i)\n          var g0 = m0\n            ? _vm.forms.includes(\n                _vm.$getScopedSlotsParams(\"310e600e-3-\" + i, \"default\", \"id\")\n              )\n            : null\n          var m1 =\n            m0 && g0\n              ? _vm.$getScopedSlotsParams(\"310e600e-3-\" + i, \"default\", \"id\")\n              : null\n\n          var l0 = _vm.__map(comment.children, function(child, j) {\n            var $orig = _vm.__get_orig(child)\n\n            var g1 = _vm.forms.includes(_vm.parentId + \"-\" + j)\n            return {\n              $orig: $orig,\n              g1: g1\n            }\n          })\n\n          return {\n            $orig: $orig,\n            m0: m0,\n            g0: g0,\n            m1: m1,\n            l0: l0\n          }\n        })\n      : null\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function(e) {\n      return e.target.classList.add(\"error\")\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view id=\"comment\" ref=\"comment\">\n    <!-- 顶部评论表单 -->\n    <comment-form :upload-img=\"uploadImg\" @form-submit=\"formSubmit\">\n      <img\n        class=\"avatar\"\n        :src=\"user.avatar || ''\"\n        @error=\"(e) => e.target.classList.add('error')\"\n      />\n    </comment-form>\n\n    <!-- 底部评论列表 -->\n    <comment-list v-if=\"cacheData.length > 0\" ref=\"comment-list\">\n      <!-- 单条评论 -->\n      <comment-item\n        v-for=\"(comment, i) in cacheData\"\n        :id=\"`comment-${i}`\"\n        :key=\"'comment-' + i\"\n        :ref=\"`comment-${i}`\"\n        :user=\"user\"\n        :comment=\"comment\"\n        @comment-reply=\"hasForm\"\n        @comment-like=\"handleCommentLike\"\n        @comment-delete=\"handleCommentDelete\"\n      >\n        <!-- 回复表单 -->\n        <template #default=\"{ id }\">\n          <comment-form\n            v-if=\"forms.includes(id)\"\n            :id=\"id\"\n            :parent=\"comment\"\n            :placeholder=\"`回复${comment.user.name}...`\"\n            :upload-img=\"uploadImg\"\n            @form-submit=\"formSubmit\"\n            @form-delete=\"deleteForm\"\n          />\n        </template>\n\n        <!-- 单条评论下的回复列表 -->\n        <template #subList=\"{ parentId }\">\n          <comment-list sub>\n            <!-- 单条回复 -->\n            <comment-item\n              v-for=\"(child, j) in comment.children\"\n              :id=\"`${parentId}-${j}`\"\n              :key=\"`${parentId}-${j}`\"\n              :ref=\"`${parentId}-${j}`\"\n              :comment=\"child\"\n              :user=\"user\"\n              :parent=\"comment\"\n              @comment-reply=\"hasForm\"\n              @comment-like=\"handleCommentLike\"\n              @comment-delete=\"handleCommentDelete\"\n            >\n              <!-- 单条回复的回复表单 -->\n              <comment-form\n                v-if=\"forms.includes(`${parentId}-${j}`)\"\n                :id=\"`${parentId}-${j}`\"\n                :comment=\"child\"\n                :parent=\"comment\"\n                :placeholder=\"`回复${child.user && child.user.name}...`\"\n                :upload-img=\"uploadImg\"\n                @form-delete=\"deleteForm\"\n                @form-submit=\"formSubmit\"\n              />\n            </comment-item>\n          </comment-list>\n        </template>\n      </comment-item>\n    </comment-list>\n  </view>\n</template>\n\n<script>\nimport CommentForm from \"./components/CommentForm.vue\";\nimport CommentList from \"./components/CommentList.js\";\nimport CommentItem from \"./components/CommentItem.vue\";\nexport default {\n  name: \"JuejinComment\",\n  components: { CommentList, CommentItem, CommentForm },\n  inheritAttrs: false,\n  model: {\n    prop: \"data\",\n    event: \"input\",\n  },\n  props: {\n    /* 数据 */\n    data: {\n      type: Array,\n      default: () => [],\n      required: true,\n    },\n    /* 当前用户 */\n    user: {\n      type: Object,\n      default: () => {},\n      required: true,\n    },\n    /* 配置属性 */\n    props: {\n      type: Object,\n      default: () => {},\n    },\n    /* 提交表单前事件 */\n    beforeSubmit: {\n      type: Function,\n      required: true,\n    },\n    /* 执行点赞前事件 */\n    beforeLike: {\n      type: Function,\n      required: true,\n    },\n    /* 执行删除前事件 */\n    beforeDelete: {\n      type: Function,\n      required: true,\n    },\n    /* 上传图片 */\n    uploadImg: {\n      type: Function,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      forms: [], // 显示在视图上的表单id数组\n      cacheData: [],\n    };\n  },\n  computed: {\n    computedProps({ props }) {\n      if (!props) return null;\n      const entries = Object.entries(props);\n      return entries.length > 0 ? entries : null;\n    },\n  },\n  created() {\n    // 监听并执行一次\n    const cancel = this.$watch(\"data\", () => {\n      this.processData();\n      cancel && cancel();\n    });\n  },\n  methods: {\n    // * 处理初始数据\n    processData() {\n      this.cacheData = this.data.map(this.comparePropsAndValues);\n    },\n    // * 对比和检查每条评论对象字段值\n    comparePropsAndValues(comment) {\n      // 初始对象\n      const originObj = {\n        id: \"\",\n        content: \"\",\n        imgSrc: \"\",\n        children: [],\n        likes: 0,\n        reply: null,\n        createAt: null,\n        user: {},\n      };\n\n      // 赋值\n      for (const key in originObj) {\n        originObj[key] =\n          comment[this.props[key]] || comment[key] || originObj[key];\n\n        // 校验\n        this.validate({ key, value: originObj[key] });\n      }\n\n      if (originObj.children.length > 0) {\n        originObj.children = originObj.children.map(this.comparePropsAndValues);\n      }\n\n      return originObj;\n    },\n    // * 校验数据\n    validate({ key, value }) {\n      const map = {\n        user: {\n          validate: function (v) {\n            return (\n              (typeof v !== \"object\" || JSON.stringify(v) === \"{}\") &&\n              this.message\n            );\n          },\n          message: \"User must be an object with props.\",\n        },\n        reply: {\n          validate: function (v) {\n            return typeof v !== \"object\" && this.message;\n          },\n          message: \"Reply must be an object\",\n        },\n        children: {\n          validate: function (v) {\n            return !Array.isArray(v) && this.message;\n          },\n          message: \"Children must be an array\",\n        },\n        createAt: {\n          validate: function () {\n            return (\n              new Date(value).toString() === \"Invalid Date\" && this.message\n            );\n          },\n          message: \"CreateAt is not a valid date.\",\n        },\n      };\n\n      const target = map[key];\n      if (!target) return;\n\n      const res = target.validate(value);\n      if (res) {\n        throw new Error(`validate(): ${res}`);\n      }\n    },\n    // * 将更新后的数组中的对象数据转换为初始对象结构\n    transformToOriginObj(comment) {\n      try {\n        const _comment = JSON.parse(\n          JSON.stringify(comment, (key, value) => {\n            if (key === \"_liked\") {\n              return undefined; // 过滤掉_liked字段\n            }\n\n            return value;\n          })\n        );\n\n        if (_comment.children && _comment.children.length > 0) {\n          _comment.children = _comment.children.map(this.transformToOriginObj);\n        }\n\n        // 返回props中自定义的字段名\n        if (!this.computedProps) return _comment;\n\n        for (const [key, value] of this.computedProps) {\n          if (key !== value && Object.hasOwnProperty.call(_comment, key)) {\n            _comment[value] = JSON.parse(JSON.stringify(_comment[key]));\n            delete _comment[key];\n          }\n        }\n\n        return _comment;\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    // * 点击回复按钮，判断是否已存在该id的表单，存在删除该表单，不存在则新增该表单，并触发其他表单blur事件\n    hasForm(id) {\n      this.forms.includes(id) ? this.deleteForm(id) : this.addForm(id);\n      this.broadcastBlur(this.$refs[\"comment-list\"].$children, id);\n    },\n    // * 增加新表单\n    addForm(id) {\n      this.forms.push(id);\n      // this.scrollIntoView(`${id}-form`)\n    },\n    // * 删除表单\n    deleteForm(id) {\n      const index = this.forms.indexOf(id);\n      index > -1 && this.forms.splice(index, 1);\n    },\n    // * 评论或回复\n    async formSubmit({\n      newComment: { id, callback, ...params },\n      parent = null,\n    }) {\n      const _params = Object.assign(params, { user: this.user });\n\n      // 等待外部提交事件执行\n      if (typeof this.beforeSubmit === \"function\") {\n        try {\n          const data = this.transformToOriginObj(_params);\n\n          const add = (data) => {\n            this.addComment(id, this.comparePropsAndValues(data));\n            callback();\n          };\n\n          await this.beforeSubmit(data, parent, add);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n    // * 点赞\n    async handleCommentLike({ id, comment: { children, _liked, ...params } }) {\n      console.log(_liked);\n      console.log(children);\n      const _params = Object.assign(params, { user: this.user });\n      if (typeof this.beforeLike === \"function\") {\n        try {\n          await this.beforeLike(this.transformToOriginObj(_params));\n\n          this.storeLikes(id);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n    // * 删除评论或回复\n    async handleCommentDelete({ id, comment, parent = null }) {\n      if (typeof this.beforeDelete === \"function\") {\n        try {\n          const data = this.transformToOriginObj(comment);\n          await this.beforeDelete(data, parent);\n\n          this.deleteComment(id);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n    // * 保存点赞\n    storeLikes(id) {\n      const { commentIndex, replyIndex } = this.getIndex(id);\n\n      let comment = this.cacheData[commentIndex];\n\n      if (!isNaN(replyIndex)) {\n        comment = comment.children[replyIndex];\n      }\n\n      comment._liked = !comment._liked;\n\n      if (comment.likes) {\n        comment._liked ? comment.likes++ : comment.likes--;\n      } else {\n        comment.likes = 1;\n      }\n\n      const data = this.cacheData.map(this.transformToOriginObj);\n      this.$emit(\"input\", data);\n    },\n    // * 存储新评论或回复\n    addComment(id, rawData) {\n      const { commentIndex } = this.getIndex(id);\n\n      // 更新视图\n      if (commentIndex === \"root\") {\n        this.cacheData.push(rawData);\n      } else {\n        const comment = this.cacheData[commentIndex];\n        comment.children.push(rawData);\n      }\n\n      // 滚动至可见视图上\n      const signal =\n        commentIndex === \"root\"\n          ? this.cacheData.length - 1\n          : `${commentIndex}-${\n              this.cacheData[commentIndex].children.length - 1\n            }`;\n      this.scrollIntoView(`comment-${signal}`);\n\n      // 更新外部数据\n      const data = this.cacheData.map(this.transformToOriginObj);\n      this.$emit(\"input\", data);\n    },\n    // * 删除评论或回复\n    deleteComment(id) {\n      const { commentIndex, replyIndex } = this.getIndex(id);\n\n      this.cacheData = this.cacheData.filter((c, i) => {\n        if (isNaN(replyIndex)) {\n          return i !== commentIndex;\n        } else {\n          c.children = c.children.filter((r, j) => j !== replyIndex);\n          return c;\n        }\n      });\n\n      const data = this.cacheData.map(this.transformToOriginObj);\n      this.$emit(\"input\", data);\n    },\n    // * 向下递归触发表单blur事件\n    broadcastBlur(target, id) {\n      if (id && target.id === id) return;\n\n      if (Array.isArray(target)) {\n        target.map((c) => this.broadcastBlur(c, id));\n      } else {\n        const children = target.$children;\n        children && this.broadcastBlur(children, id);\n\n        const richInput = target.$refs[\"rich-input\"];\n        richInput && richInput.blur();\n      }\n    },\n    // * 从id中提取出序号\n    getIndex(id) {\n      const [, c, r] = id.split(\"-\");\n      return { commentIndex: c === \"root\" ? c : +c, replyIndex: +r };\n    },\n    // * 使得更新的子组件滚动到视图可见区域\n    scrollIntoView(ref) {\n      this.$nextTick(() => {\n        this.$refs[ref][0].$el.scrollIntoView(false);\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#comment {\n  & > .comment-list {\n    background-color: #fff;\n  }\n\n  ::v-deep {\n    img {\n      user-select: none;\n      -webkit-user-drag: none;\n      &.avatar {\n        width: 2.1336rem;\n        height: 2.1336rem;\n        border-radius: 50%;\n        cursor: pointer;\n      }\n      &.error {\n        display: inline-block;\n        transform: scale(0.5);\n        content: \"\";\n        color: transparent;\n        &::before {\n          content: \"\";\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          border: 1px solid #e7e7e7;\n          box-sizing: border-box;\n          transform: scale(2);\n          background: #f5f5f5\n            url(\"data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cpath d='M304.128 456.192c48.64 0 88.064-39.424 88.064-88.064s-39.424-88.064-88.064-88.064-88.064 39.424-88.064 88.064 39.424 88.064 88.064 88.064zm0-116.224c15.36 0 28.16 12.288 28.16 28.16s-12.288 28.16-28.16 28.16-28.16-12.288-28.16-28.16 12.288-28.16 28.16-28.16z' fill='%23e6e6e6'/%3E%3Cpath d='M887.296 159.744H136.704C96.768 159.744 64 192 64 232.448v559.104c0 39.936 32.256 72.704 72.704 72.704h198.144L500.224 688.64l-36.352-222.72 162.304-130.56-61.44 143.872 92.672 214.016-105.472 171.008h335.36C927.232 864.256 960 832 960 791.552V232.448c0-39.936-32.256-72.704-72.704-72.704zm-138.752 71.68v.512H857.6c16.384 0 30.208 13.312 30.208 30.208v399.872L673.28 408.064l75.264-176.64zM304.64 792.064H165.888c-16.384 0-30.208-13.312-30.208-30.208v-9.728l138.752-164.352 104.96 124.416-74.752 79.872zm81.92-355.84l37.376 228.864-.512.512-142.848-169.984c-3.072-3.584-9.216-3.584-12.288 0L135.68 652.8V262.144c0-16.384 13.312-30.208 30.208-30.208h474.624L386.56 436.224zm501.248 325.632c0 16.896-13.312 30.208-29.696 30.208H680.96l57.344-93.184-87.552-202.24 7.168-7.68 229.888 272.896z' fill='%23e6e6e6'/%3E%3C/svg%3E\")\n            no-repeat center / 50% 50%;\n        }\n      }\n    }\n  }\n}\n\n@media screen and (max-width: 600px) {\n  #comment {\n    & > .comment-list {\n      margin: 0 1.6rem;\n    }\n    & > .comment-form {\n      margin: 1rem 1.6rem;\n    }\n    & > ::v-deep .comment-root .avatar-box {\n      display: none;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=e8cef2a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=e8cef2a6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1641297680297\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}